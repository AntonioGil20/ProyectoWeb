<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario</title>
    <link rel="stylesheet" href="style/inventario.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <div class="container">
        <div class="grid-container">
            <!-- Left Section: Inventory Table and Controls -->
            <div class="left-panel">
                <h2>Inventario</h2>
                <div class="controls">
                    <button class="btn btn-secondary" title="Refrescar inventario" onclick="refreshInventory()">
                        <img src="images/refresh.png" alt="Refrescar" class="refresh-btn">
                    </button>
                    <button class="btn btn-primary" onclick="startNewPurchase()">+ Nueva Compra</button>
                    <select class="form-select" id="categoryFilter" onchange="filterCategoryChanged()">
                        <option value="Todas" selected>Todas</option>
                        <option value="Carnes">Carnes</option>
                        <option value="Verduras">Verduras</option>
                        <option value="Costco">Costco</option>
                        <option value="Super">Super</option>
                        <option value="Postres">Postres</option>
                        <option value="Desechables">Desechables</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>
                <input type="text" class="form-control" id="searchText" placeholder="Buscar producto..." oninput="filterInventory()">
                <div class="table-header">
                    <span>Producto</span>
                    <span>Categoría</span>
                    <span>Cantidad</span>
                    <span>Unidad</span>
                    <span>Total</span>
                    <span>Última Compra</span>
                    <span></span>
                    <span></span>
                </div>
                <div class="table-body" id="inventoryTable"></div>
            </div>

            <!-- Right Section: Purchase Registration -->
            <div class="right-panel">
                <div class="panel-header">
                    <h3>Registrar Compra</h3>
                </div>
                <div class="form-container">
                    <label>Producto</label>
                    <input type="text" class="form-control" id="nombreProducto" placeholder="Nombre del producto">
                    <label>Categoría</label>
                    <select class="form-select" id="categoria">
                        <option value="Carnes">Carnes</option>
                        <option value="Verduras">Verduras</option>
                        <option value="Costco">Costco</option>
                        <option value="Super">Super</option>
                        <option value="Postres">Postres</option>
                        <option value="Desechables">Desechables</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <div class="form-row">
                        <div>
                            <label>Cantidad</label>
                            <input type="number" class="form-control" id="cantidad" placeholder="Cantidad comprada" step="0.01">
                        </div>
                        <div>
                            <label>Unidad</label>
                            <select class="form-select" id="unidad">
                                <option value="Kg">Kg</option>
                                <option value="Litros">Litros</option>
                                <option value="Piezas">Piezas</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                    </div>
                    <label>Precio</label>
                    <input type="number" class="form-control" id="total" placeholder="Precio en pesos" step="0.01">
                    <label>Relacionar Platillo/Bebida</label>
                    <div class="dynamic-fields">
                        <div class="dynamic-field">
                            <input type="text" class="form-control" id="relatedProduct" placeholder="Producto relacionado">
                        </div>
                        <div class="form-row">
                            <button class="btn btn-primary" onclick="addRelatedProduct()">Agregar otro producto relacionado</button>
                            <button class="btn btn-danger" id="removeRelated" style="display: none;" onclick="removeLastRelatedProduct()">Eliminar último</button>
                        </div>
                        <div id="relatedProductsList"></div>
                    </div>
                    <button class="btn btn-success" id="registerButton" onclick="registerPurchase()">Registrar Compra</button>
                    <button class="btn btn-success" id="saveButton" style="display: none;" onclick="saveChanges()">Guardar Cambios</button>
                </div>
            </div>
        </div>
        <div id="errorMessage" style="color: red; text-align: center;"></div>
    </div>
    <script type="module" src="../scripts/inventario.js"></script>
</body>
</html>